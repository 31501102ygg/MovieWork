<!DOCTYPE html>
<html lang="en">

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta http-equiv="x-ua-compatible" content="ie=edge">
		<title>Yip Tang Movie</title>
		<!-- Font Awesome -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
		<!-- Bootstrap core CSS -->
		<link href="css/bootstrap.min.css" rel="stylesheet">
		<!-- Material Design Bootstrap -->
		<link href="css/mdb.min.css" rel="stylesheet">
		<!-- Your custom styles (optional) -->
		<link href="css/style.css" rel="stylesheet">
		<style type="text/css">
			.view{
				height: 100vh;
				overflow: hidden;
			}
			.navbar{
				background-color: rgba(0,0,0,.3);
			}
		</style>
	</head>

	<body>
		<!--Navbar-->
		<nav class="navbar navbar-expand-lg navbar-dark lighten-5 fixed-top scrolling-navbar">
			<div class="container">
			<!-- Navbar brand -->
			<a class="navbar-brand" href="#"><img src="img/pic/logo.png"></a>

			<!-- Collapse button -->
			<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#basicExampleNav" aria-controls="basicExampleNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

			<!-- Collapsible content -->
			<div class="collapse navbar-collapse" id="basicExampleNav">

				<!-- Links -->
				<ul class="navbar-nav mr-auto ">
					<li class="nav-item disabled">
						<a class="nav-link" href="#">热映电影</a>
					</li>
					<li class="nav-item disabled">
						<a class="nav-link" href="#">寻找电影</a>
					</li>
					<li class="nav-item disabled">
						<a class="nav-link" href="#">影评</a>
					</li>
					<li class="nav-item disabled">
						<a class="nav-link" href="#">个人收藏</a>
					</li>
					<!-- Dropdown -->
					<!--<li class="nav-item dropdown">
						<a class="nav-link dropdown-toggle" id="navbarDropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Dropdown</a>
						<div class="dropdown-menu dropdown-primary" aria-labelledby="navbarDropdownMenuLink">
							<a class="dropdown-item" href="#">Action</a>
							<a class="dropdown-item" href="#">Another action</a>
							<a class="dropdown-item" href="#">Something else here</a>
						</div>
					</li>-->

				</ul>
				<!-- Links -->
				<ul class="navbar-nav mr-auto nav-flex-icons">
					<li class="nav-item">
                            <a class="nav-link waves-effect waves-light" href="#">
                                <i class="fa fa-envelope"></i> 联系我们</a>
                        </li>
					<li class="nav-item">
                            <a class="nav-link waves-effect waves-light" href="#">
                                <i class="fa fa-gear"></i> 设置</a>
                        </li>
					<li id="signup" class="nav-item">
                            <a class="nav-link waves-effect waves-light" href="#">
                                <i class="fa fa-user-plus"></i> 注册</a>
                        </li>
				</ul>
			</div>
			<!-- Collapsible content -->
			</div>
		</nav>
		<div class="view full-page-intro" style="background-image: url(img/pic/starTrek.jpg); background-repeat: no-repeat; background-size: cover;">

    <!-- Mask & flexbox options-->
    <div class="mask rgba-black-light d-flex justify-content-center align-items-center">

      <!-- Content -->
      <div class="container">

        <!--Grid row-->
        <div class="row wow fadeIn" style="visibility: visible; animation-name: fadeIn;">

          <!--Grid column-->
          <div class="col-md-6 mb-4 white-text text-center text-md-left">

            <h1 class="display-4 font-weight-bold">Yip&amp;Tang Movie Site</h1>

            <hr class="hr-light">

            <p>
              <strong>热门电影推荐&amp;影讯影评</strong>
            </p>

            <p class="mb-4 d-none d-md-block animated fadeIn">
              <strong>这是一个电影推荐，查询网站，你可以收藏自己喜欢的电影，查看电影影评，发表电影影评，其他用户也可以给你留言进行互动。</strong>
            </p>

            <!--<a target="_blank" href="https://mdbootstrap.com/bootstrap-tutorial/" class="btn btn-indigo btn-lg waves-effect waves-light">Start free tutorial
              <i class="fa fa-graduation-cap ml-2"></i>
            </a>-->

          </div>
          <!--Grid column-->

          <!--Grid column-->
          <div class="col-md-6 col-xl-5 mb-4">

            <!--Card-->
            <div class="card" >

              <!--Card content-->
              <div class="card-body">

                <!-- Form -->
                <form >
                  <!-- Heading -->
                  <h3 class="dark-grey-text text-center">
                    <strong>用户登录</strong>
                  </h3>
                  <hr>

                  <div class="md-form">
                    <i class="fa fa-user prefix grey-text"></i>
                    <input type="text" id="userName" class="form-control">
                    <label for="form3">账号</label>
                  </div>
                  <div class="md-form">
                    <i class="fa fa-lock prefix grey-text"></i>
                    <input type="text" id="passWord" class="form-control">
                    <label for="form2">密码</label>
                  </div>

                  <div class="text-center">
                    <button id="signin" type="button" class="btn btn-indigo waves-effect waves-light">登录</button>
                    <hr>
                    <fieldset class="form-check">
                      <input type="checkbox" class="form-check-input" id="checkbox1">
                      <label for="checkbox1" class="form-check-label dark-grey-text">自动登录</label>
                    </fieldset>
                  </div>

                </form>
                <!-- Form -->

              </div>

            </div>
            <!--/.Card-->

          </div>
          <!--Grid column-->

        </div>
        <!--Grid row-->

      </div>
      <!-- Content -->

    </div>
    <!-- Mask & flexbox options-->

  </div>

		<!-- /Start your project here-->

		<!-- SCRIPTS -->
		<!-- JQuery -->
		<script type="text/javascript" src="js/jquery-3.3.1.min.js"></script>
		<!-- Bootstrap tooltips -->
		<script type="text/javascript" src="js/popper.min.js"></script>
		<!-- Bootstrap core JavaScript -->
		<script type="text/javascript" src="js/bootstrap.min.js"></script>
		<!-- MDB core JavaScript -->
		<script type="text/javascript" src="js/mdb.min.js"></script>
		<script type="text/javascript">
			$(document).ready(function(){
				$("#signup").click(function(){
					window.location.href='./signUp.html';
				})
				
				$("#signin").click(function(){
				var userName = document.getElementById("userName").value;
				var passWord = document.getElementById("passWord").value;
				console.log(userName);
				console.log(passWord);
				if (!userName)
					alert("用户名不能为空！");
				else if (!passWord) 
					alert("密码不能为空！");
				else{
					var url = " http://127.0.0.1:3000/findUser"+"?"+"userName="+userName;
					fetch(url,{
						method:"GET"
					}).then(function(response){
						console.log(response);
						return response.json();
					}).then(function(json){
						console.log(json);
						var user = json[0];
						if(!user){
							alert("没有这个账号");
							return;
						}
						if(user.password == passWord){
							if(document.getElementById("checkbox1").value == true){
								localStorage.setItem("username",userName);
								localStorage.setItem("password",passWord);
							}
							sessionStorage.setItem("username",userName);
							sessionStorage.setItem("password",passWord);
							window.location.href='./main.html';
						}
						else{
							alert("密码错误！")
						}							
						
					})
				}

				
			})
			})
			
		</script>
	</body>

</html>